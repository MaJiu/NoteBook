[toc]

### IPC

信号量、互斥量和条件变量是用于实现线程间同步和互斥的三种线程同步机制。

1. 信号量（Semaphore）：信号量是一个计数器，用于控制多个线程对共享资源的访问。它可以用来实现多个线程之间的同步。信号量分为计数型信号量和二进制信号量，计数型信号量的值可以大于1，二进制信号量的值只能是0或1。

   典型的操作有：

   - P（Wait）操作：尝试获取信号量资源，如果信号量值大于0，则减1并继续执行，如果值为0，则线程阻塞等待。
   - V（Signal）操作：释放信号量资源，将信号量值加1，并唤醒等待的线程。

2. 互斥量（Mutex）：互斥量是一种特殊的信号量，它只能有两个状态：锁定和非锁定。用于保护共享资源，一次只允许一个线程访问共享资源，其他线程必须等待互斥量解锁后才能访问。

   典型的操作有：

   - Lock操作：尝试获取互斥量资源，如果互斥量已经被其他线程锁定，则当前线程阻塞等待。
   - Unlock操作：释放互斥量资源，将互斥量解锁，其他线程可以继续访问共享资源。

3. 条件变量（Condition Variable）：条件变量是用来在多个线程之间传递条件的一种同步机制。它允许一个线程等待某个条件的发生，并在条件满足时唤醒等待的线程。

   典型的操作有：

   - Wait操作：线程在条件变量上等待，如果条件不满足，则线程阻塞等待。
   - Signal操作：唤醒一个等待在条件变量上的线程。
   - Broadcast操作：唤醒所有等待在条件变量上的线程。

这些线程同步机制在多线程编程中非常重要，可以用于实现线程间的同步、互斥和协作。它们在不同的场景中具有不同的应用，合理使用它们可以避免线程竞争和死锁等问题，提高程序的效率和可靠性。

### 进程间通讯方式

管道、系统IPC（包括消息队列、信号量、信号、共享内存等）、以及套接字socket

### 线程间通讯方式

信号量 静态变量

### 进程和线程的区别

进程是对运行时程序的封装，是系统进行**资源调度和分配**的的基本单位，实现了操作系统的并发

线程是进程的子任务，是**CPU调度和分派**的基本单位，用于保证程序的实时性，实现进程内部的并发

### 死锁产生的必要条件

1.互斥条件：一个资源每次只能被一个进程使用。
2.请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。
3.不剥夺条件:进程已获得的资源，在末使用完之前，不能强行剥夺。
4.循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。

### 磁盘阵列（Redundant Arrays of Independent Disks，RAID）

​		其基本思想就是把多个相对便宜的硬盘组合起来，成为一个硬盘阵列组，使性能达到甚至超过一个价格昂贵、容量巨大的硬盘。

RAID 0  并行传送 速度快 0容灾

RAID 1 镜像备份 容量减半 安全

RAID 2 汉明码**纠错** 开销大

RAID 3 奇偶校验码校验 1容灾

RAID 4 按区块存储计算校验码 1容灾 性能受恢复盘限制

RAID 5 分布式奇偶校验 1容灾

RAID 6 在 RAID 5 基础上再加一种校验码 2容灾

RAID 7

**可以嵌套使用**

# 进程管理

# 内存管理

# 设备管理(I/0)

## 磁盘管理

软盘 硬盘 固态硬盘

扇区 柱面( 磁道) 柱头

LBA 和 CHS 寻址

引导操作系统

分区: MBR (Master Boot Record) 和 GPT (GUID Partition Table)

# 文件系统

文件系统就是对磁盘存储空间的抽象

FAT(File Allocation Table)  以簇为单位对磁盘空间管理,  一个文件/目录由多个簇组成，簇直接以链表形式组织

由 Boot Sector、File Allocation Table(一般会有一个备份)、Root Diectory、Cluster Data Area

FATx 就是说分区表位宽有 x 位， FAT 12 分区表宽度为 12，最多可索引 2^12 个簇

目录项由 32 个字节构成，文件名占 11，其中文件名 8， 拓展名 3， 文件属性占 1， 10 个保留位，2个最后一次写入时间，2个最后一次写入日期，2 个其实簇号，4 个文件大小

# Graphic

## 术语

Surface  绘制的目标，将内容绘制到 Surface 上

on-screen   绘制的内容会显示在屏幕上

off-screen   绘制的内容保存在内存中，后续可能会再处理或者持久化

Native Render API  操作系统提供的原生的绘制 API 比如 Windows 的 GDI 和 X11 的 XLib 和 Android 的 Canvas



# GUI

# 学习资料

## 现代操作系统

## 深入理解计算机系统

## 南京大学-操作系统-蒋炎岩

https://www.bilibili.com/video/BV1Cm4y1d7Ur/

https://jyywiki.cn

## 一个 64 位操作系统的设计与实现

## Linux 内核设计与实现

## 操作系统: 原理与实现

## 可供研究的操作系统实例

### Linux

Linux 0.11 源码

### Android

AOSP

### OpenHarmonyOS

### Minix

### DOS

FreeDos

### Windows

WSL

WSA